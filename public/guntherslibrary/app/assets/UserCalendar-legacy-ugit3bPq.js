System.register(["./index-legacy-At7YkI8I.js","./objects-legacy-D3ucy5zm.js"],function(a,e){"use strict";var r,n,l,t,o,i,d,s,m,c,u,v,y,f,p,h,b,g,k,E,w,x,F,C,j,I,D,S,M,W,T;return{setters:[a=>{r=a.d,n=a.u,l=a.r,t=a.o,o=a.c,i=a.a,d=a.b,s=a.w,m=a.v,c=a.f,u=a.n,v=a.e,y=a.k,f=a.m,p=a.F,h=a.g,b=a.i,g=a.h,k=a.j,E=a.I,w=a.t,x=a.H,F=a.A,C=a.G,j=a.p,I=a.q,D=a.s,S=a.C,M=a._},a=>{W=a.f,T=a.o}],execute:function(){var e=document.createElement("style");e.textContent=".calendarMonthForm .btn[data-v-01be08d3]{padding-inline:.2rem}.calendarYearInput[data-v-01be08d3]{position:relative}.calendarYearInput label[data-v-01be08d3]{position:absolute;top:50%;left:.4rem;transform:translateY(-50%);display:grid;place-items:center;height:3.2rem;font-size:1.4rem;background-color:hsl(from var(--text) h s l / .1);border-right:2px solid hsl(from var(--text) h s l / .2);border-radius:.8rem;border-top-right-radius:0;border-bottom-right-radius:0;padding-inline:.3rem}.calendarYearInput .input[data-v-01be08d3]{padding-inline-start:4.8rem;padding-inline-end:.1rem;width:9rem;font-weight:700}.calendarDayForm[data-v-01be08d3]{display:grid;grid-template-columns:5rem 1fr 5rem 4.2rem;gap:.2rem;margin-block:.4rem}.calendar[data-v-01be08d3]{display:grid;grid-template-columns:repeat(7,1fr);grid-template-rows:1fr;justify-content:center;align-items:start;margin-block:.8rem;margin-inline:-.9rem}.calendarDay[data-v-01be08d3]{position:relative;flex:1;display:flex;flex-direction:row;flex-wrap:wrap;align-items:start;justify-content:start;gap:.3rem;font-size:1rem;font-weight:700;padding:1.4rem .4rem .2rem;border-left:1px solid hsl(from var(--text) h s l / .3);border-bottom:1px solid hsl(from var(--text) h s l / .3);height:100%;min-height:8.4rem}.calendarDay[data-v-01be08d3]:nth-child(7n){border-right:1px solid hsl(from var(--text) h s l / .3)}.calendarDay.day[data-v-01be08d3]{display:block;text-align:center;padding:.2rem .4rem;min-height:auto;background-color:hsl(from var(--text) h s l / .1);border-top:1px solid hsl(from var(--text) h s l / .3);border-left:1px solid hsl(from var(--text) h s l / .3);border-bottom:1px solid hsl(from var(--text) h s l / .3)}.calendarDay.day[data-v-01be08d3]:nth-child(7n){border-right:1px solid hsl(from var(--text) h s l / .3)}.calendarDay.active[data-v-01be08d3]{background-color:hsl(from var(--text) h s l / .2)}.calendarDay[data-v-01be08d3]:not(.day):after{position:absolute;top:0;right:0;padding:.1rem .2rem;content:attr(data-day);font-size:1rem;font-weight:700;color:hsl(from var(--text) h s l / .7)}.more.appIcon[data-v-01be08d3]{position:absolute;bottom:.4rem;right:.2rem}.addEventForm[data-v-01be08d3]{position:relative;display:grid;grid-template:auto / 5.4rem 1fr 1fr 5.4rem;gap:.8rem}.addEventFieldTitle[data-v-01be08d3]{grid-column:2 / -1}.addEventFieldYear[data-v-01be08d3]{grid-column:1 / 2}.addEventFieldMonth[data-v-01be08d3]{grid-column:2 / -1}.addEventFieldDay[data-v-01be08d3]{grid-column:1 / 3}.addEventFieldTime[data-v-01be08d3]{grid-column:3 / -1}.addEventFieldRepeats[data-v-01be08d3]{grid-column:1 / -1}.newEventIcon[data-v-01be08d3]{display:grid;place-items:center;padding:0;height:3.2rem;width:4.8rem}.loveList[data-v-01be08d3]{display:flex;flex-wrap:wrap;gap:.5rem .6rem;margin-block:.2rem}\n/*$vite$:1*/",document.head.appendChild(e);const Y={class:"mainList"},z={class:"notesBox box twigsLight"},A={class:"boxContent",style:{"padding-block-end":"0.8rem"}},U={class:"calendarMonthForm tagGroup tagGroupSpan"},_={class:"calendarYearInput"},B={class:"calendarDayForm"},P={class:"selectWrapper"},G=["value"],L={class:"calendar"},V=["data-day","onClick"],$={class:"tagGroup"},O={class:"miniLabel"},R={key:0,class:"loveList"},q={key:0},H=["onClick"],K={class:"form addEventForm"},N={class:"field addEventFieldIcon"},J={"aria-labelledby":"newEventIcon",popovertarget:"iconPopover",class:"newEventIcon btn block tertiary"},Q={id:"iconPopover",class:"iconPopover",popover:"manual"},X={class:"iconPopoverInner"},Z={popovertarget:"iconPopover",popovertargetaction:"hide",class:"close"},aa={class:"eventIconList"},ea=["onClick"],ra={class:"field addEventFieldTitle"},na={class:"field addEventFieldYear"},la={class:"field addEventFieldMonth"},ta={id:"newEventMonth",class:"label"},oa={"aria-labelledby":"newEventMonth",class:"calendarMonthForm tagGroup tagGroupSpan"},ia={class:"field addEventFieldDay"},da=["value"],sa={class:"field addEventFieldTime"},ma=["value"],ca={class:"field addEventFieldRepeats"},ua={value:"weekly"},va={value:"monthly"},ya={value:"yearly"};a("default",M(r({__name:"UserCalendar",setup(a){const e=n(),r=["Spring","Summer","Fall","Winter"],M={Spring:0,Summer:1,Fall:2,Winter:3},fa={id:btoa("event_"+new Date(Math.ceil(1e13*Math.random())).getTime()),title:"",month:"Spring",day:1,time:"allDay",year:1,icon:"flag",recurrence:"none"},pa=l(fa),ha=l(!1),ba=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],ga=()=>{ha.value=!1,pa.value={...fa},pa.value.year=e.farms[e.farm].calendar.year,pa.value.month=e.farms[e.farm].calendar.month,pa.value.day=e.farms[e.farm].calendar.day,e.openModal("calendarAdd")},ka=()=>{(!pa.value.year||pa.value.year<1)&&(pa.value.year=1),e.farms[e.farm].calendarEvents.push({id:btoa("event_"+new Date(Math.ceil(1e13*Math.random())).getTime()),title:pa.value.title,month:pa.value.month,day:pa.value.day,year:pa.value.year,time:pa.value.time||void 0,recurrence:pa.value.recurrence,icon:pa.value.icon}),e.saveFarms(),e.closeModal(),pa.value=fa},Ea=()=>{ha.value=!1,pa.value=fa,e.closeModal()},wa=()=>{if(!pa.value)return;(!pa.value.year||pa.value.year<1)&&(pa.value.year=1);const a=e.farms[e.farm].calendarEvents.findIndex(a=>{var e;return a.id===(null===(e=pa.value)||void 0===e?void 0:e.id)});-1!==a&&(e.farms[e.farm].calendarEvents[a]={...pa.value},e.saveFarms()),e.closeModal(),ha.value=!1};function xa(a){const r=[];return e.settings.app.showBuiltInEvents&&r.push(...C),e.farms[e.farm].calendarEvents&&r.push(...e.farms[e.farm].calendarEvents),r.filter(r=>{if(r.month===e.farms[e.farm].calendar.month&&r.day===a&&r.year===e.farms[e.farm].calendar.year)return!0;switch(r.recurrence){case"daily":return r.year<e.farms[e.farm].calendar.year||r.year===e.farms[e.farm].calendar.year&&M[r.month]<M[e.farms[e.farm].calendar.month]||r.year===e.farms[e.farm].calendar.year&&r.month===e.farms[e.farm].calendar.month&&r.day<a;case"weekly":return r.year<e.farms[e.farm].calendar.year&&Fa(r.day)===Fa(a)||r.year===e.farms[e.farm].calendar.year&&M[r.month]<M[e.farms[e.farm].calendar.month]&&Fa(r.day)===Fa(a)||r.year===e.farms[e.farm].calendar.year&&r.month===e.farms[e.farm].calendar.month&&r.day<=a&&Fa(r.day)===Fa(a);case"monthly":return r.year<e.farms[e.farm].calendar.year&&r.day===a||r.year===e.farms[e.farm].calendar.year&&M[r.month]<M[e.farms[e.farm].calendar.month]&&r.day===a||r.year===e.farms[e.farm].calendar.year&&r.month===e.farms[e.farm].calendar.month&&r.day===a;case"yearly":return r.year<e.farms[e.farm].calendar.year&&r.day===a&&r.month===e.farms[e.farm].calendar.month||r.year===e.farms[e.farm].calendar.year&&r.day===a&&r.month===e.farms[e.farm].calendar.month;default:return!1}})}const Fa=a=>{var e;return null!==(e=ba[(a-1)%7])&&void 0!==e?e:""},Ca=()=>{const a=e.farms[e.farm].calendar.day;a>1?e.farms[e.farm].calendar.day=a-1:("Spring"===e.farms[e.farm].calendar.month&&(e.farms[e.farm].calendar.year-=1,e.farms[e.farm].calendar.year<1&&(e.farms[e.farm].calendar.year=1)),e.farms[e.farm].calendar.day=28,e.farms[e.farm].calendar.month=r[(r.indexOf(e.farms[e.farm].calendar.month)+3)%4]),e.saveFarms()},ja=()=>{const a=e.farms[e.farm].calendar.day;a<28?e.farms[e.farm].calendar.day=a+1:("Winter"===e.farms[e.farm].calendar.month&&(e.farms[e.farm].calendar.year+=1),e.farms[e.farm].calendar.day=1,e.farms[e.farm].calendar.month=r[(r.indexOf(e.farms[e.farm].calendar.month)+1)%4]),e.saveFarms()},Ia=a=>a.builtIn&&a.title.includes("Birthday"),Da=a=>{if(a.builtIn&&a.title.includes("Birthday")){const r=e.villager[a.id.charAt(0).toUpperCase()+a.id.slice(1)];return r&&r.giftItems.love||[]}};return t(()=>{e.header={hideIcon:!1,hideUp:!0,iconName:"calendar",iconSize:"2",label:"Calendar",bookmark:{appType:"page",id:"calendar",name:"Calendar",link:"/gunther/calendar",icon:"calendar",scale:3}}}),(a,r)=>{const n=y("icon");return i(),o("main",null,[d("div",Y,[d("div",z,[d("div",A,[d("div",U,[d("div",_,[r[19]||(r[19]=d("label",{for:"calendarYear"},"Year",-1)),s(d("input",{type:"number",id:"calendarYear","onUpdate:modelValue":r[0]||(r[0]=a=>c(e).farms[c(e).farm].calendar.year=a),onChange:r[1]||(r[1]=a=>c(e).saveFarms()),class:"input",min:"1"},null,544),[[m,c(e).farms[c(e).farm].calendar.year]])]),d("button",{class:u(["btn tertiary",{active:"Spring"===c(e).farms[c(e).farm].calendar.month}]),onClick:r[2]||(r[2]=()=>{c(e).farms[c(e).farm].calendar.month="Spring",c(e).saveFarms()}),"aria-label":"Spring"},[v(n,{name:"season-spring"})],2),d("button",{class:u(["btn tertiary",{active:"Summer"===c(e).farms[c(e).farm].calendar.month}]),onClick:r[3]||(r[3]=()=>{c(e).farms[c(e).farm].calendar.month="Summer",c(e).saveFarms()}),"aria-label":"Summer"},[v(n,{name:"season-summer"})],2),d("button",{class:u(["btn tertiary",{active:"Fall"===c(e).farms[c(e).farm].calendar.month}]),onClick:r[4]||(r[4]=()=>{c(e).farms[c(e).farm].calendar.month="Fall",c(e).saveFarms()}),"aria-label":"Fall"},[v(n,{name:"season-fall"})],2),d("button",{class:u(["btn tertiary",{active:"Winter"===c(e).farms[c(e).farm].calendar.month}]),onClick:r[5]||(r[5]=()=>{c(e).farms[c(e).farm].calendar.month="Winter",c(e).saveFarms()}),"aria-label":"Winter"},[v(n,{name:"season-winter"})],2)]),d("div",B,[d("button",{class:"btn tertiary","aria-label":"Go to previous day",onClick:Ca},[v(n,{name:"arrow-outline-left"})]),d("div",P,[s(d("select",{class:"select",id:"dayOfMonth","aria-label":"Day of month","onUpdate:modelValue":r[6]||(r[6]=a=>c(e).farms[c(e).farm].calendar.day=a),onChange:r[7]||(r[7]=a=>c(e).saveFarms())},[(i(),o(p,null,h(28,a=>d("option",{key:a,value:a},w(c(T)(a))+" of "+w(c(e).farms[c(e).farm].calendar.month),9,G)),64))],544),[[f,c(e).farms[c(e).farm].calendar.day]])]),d("button",{class:"btn tertiary","aria-label":"Go to next day",onClick:ja},[v(n,{name:"arrow-outline-right"})]),d("button",{class:u(["btn tertiary",{active:c(e).settings.app.showBuiltInEvents}]),style:{"padding-inline":"0"},"aria-label":"Show built-in events",onClick:r[8]||(r[8]=a=>c(e).settings.app.showBuiltInEvents=!c(e).settings.app.showBuiltInEvents)},[v(n,{name:"flag"})],2)]),d("div",L,[(i(),o(p,null,h(ba,a=>d("div",{key:a,class:"calendarDay day"},w(a),1)),64)),(i(),o(p,null,h(28,a=>d("div",{key:a,class:u(["calendarDay",{active:c(e).farms[c(e).farm].calendar.day===a}]),"data-day":a,onClick:()=>{c(e).farms[c(e).farm].calendar.day=a,c(e).saveFarms()}},[(i(!0),o(p,null,h(xa(a),(a,e)=>(i(),o(p,{key:a.id},[a.icon&&e<2?(i(),j(n,{key:0,name:a.icon,trim:!1,size:"2"},null,8,["name"])):b("",!0)],64))),128)),xa(a).length>2?(i(),j(n,{key:0,class:"more",name:"plus",size:1.5,trim:!1})):b("",!0)],10,V)),64))]),d("div",$,[xa(c(e).farms[c(e).farm].calendar.day).length>0?(i(!0),o(p,{key:0},h(xa(c(e).farms[c(e).farm].calendar.day),a=>(i(),o("div",{key:a.id,class:"tag tagBlock",style:{"grid-template":"auto / 3.2rem 1fr 3.2rem"}},[a.icon?(i(),j(n,{key:0,name:a.icon,trim:!1},null,8,["name"])):b("",!0),d("div",O,[k(w("allDay"!==a.time?`[${c(x).find(e=>e.time24===a.time).time12}]  `:"")+w(a.title)+" ",1),Ia(a)?(i(),o("div",R,[(i(!0),o(p,null,h(Da(a),(a,e)=>(i(),o(p,{key:e},[a.universal?b("",!0):(i(),o("div",q,[a.sprite?(i(),o("div",{key:0,class:"appIcon",style:I(c(D)({index:a.sprite,texture:a.texture,scale:1}))},null,4)):a.category&&a.category.startsWith("-")&&c(S)[a.category]?(i(),j(n,{key:1,class:"appIcon",name:c(S)[a.category].icon,size:"1"},null,8,["name"])):a.context&&c(S)[`context-${a.context.toLowerCase().replaceAll(" ","_")}`]?(i(),j(n,{key:2,class:"appIcon",name:c(S)[`context-${a.context.toLowerCase().replaceAll(" ","_")}`].icon,size:"1"},null,8,["name"])):b("",!0)]))],64))),128))])):b("",!0)]),a.builtIn?b("",!0):(i(),o("button",{key:1,class:"btn tertiary",onClick:r=>(a=>{pa.value={...a},ha.value=!0,e.openModal("calendarAdd")})(a),style:{padding:"0","min-height":"100%"},"aria-label":"Edit event"},[v(n,{name:"pencil",size:"1.5"})],8,H))]))),128)):b("",!0),v(F,{"modal-id":"calendarAdd",class:"tagBlock",title:"Add Calendar Event",height:"auto"},{button:g(()=>[d("button",{class:"btn block",onClick:ga},"Add event")]),body:g(()=>[d("div",K,[d("div",N,[r[21]||(r[21]=d("label",{id:"newEventIcon",class:"label"},"Icon",-1)),d("button",J,[v(n,{name:pa.value.icon,trim:!1},null,8,["name"])]),d("dialog",Q,[d("div",X,[d("button",Z,[v(n,{name:"rustic-x",size:"1.5"})]),r[20]||(r[20]=d("h3",null,"Select an icon to represent your event.",-1)),d("div",aa,[(i(!0),o(p,null,h(c(E),a=>(i(),o(p,{key:a.name},[["no-icon","junimo-green-1","junimo-green-3","junimo-green-4","junimo-green-5","junimo-blue-1","junimo-blue-3","junimo-blue-4","junimo-blue-5","junimo-red-1","junimo-red-3","junimo-red-4","junimo-red-5","junimo-purple-1","junimo-purple-3","junimo-purple-4","junimo-purple-5","junimo-yellow-1","junimo-yellow-3","junimo-yellow-4","junimo-yellow-5","junimo-orange-1","junimo-orange-3","junimo-orange-4","junimo-orange-5","junimo-gray-1","junimo-gray-3","junimo-gray-4","junimo-gray-5"].includes(a.name)||["People and Creatures","Prairie King"].includes(a.category)||["Pets"].includes(a.category)&&a.name.startsWith("npc-")||a.name.startsWith("avatar-")?b("",!0):(i(),o("button",{key:0,popovertarget:"iconPopover",popovertargetaction:"hide",class:u(["eventIconOption note",{parchment:pa.value.icon===a.name}]),onClick:e=>pa.value.icon=a.name},[v(n,{name:a.name,trim:!1},null,8,["name"])],10,ea))],64))),128))])])])]),d("div",ra,[r[22]||(r[22]=d("label",{for:"newEventTitle",class:"label"},"Title",-1)),s(d("input",{type:"text",id:"newEventTitle","onUpdate:modelValue":r[9]||(r[9]=a=>pa.value.title=a),class:"input"},null,512),[[m,pa.value.title]])]),d("div",na,[r[23]||(r[23]=d("label",{for:"newEventYear",class:"label"},"Year",-1)),s(d("input",{type:"number",id:"newEventYear","onUpdate:modelValue":r[10]||(r[10]=a=>pa.value.year=a),class:"input",min:"1"},null,512),[[m,pa.value.year]])]),d("div",la,[d("div",ta,"Month: "+w(pa.value.month),1),d("div",oa,[d("button",{class:u(["btn tertiary",{active:"Spring"===pa.value.month}]),onClick:r[11]||(r[11]=a=>pa.value.month="Spring"),"aria-label":"Spring"},[v(n,{name:"season-spring"})],2),d("button",{class:u(["btn tertiary",{active:"Summer"===pa.value.month}]),onClick:r[12]||(r[12]=a=>pa.value.month="Summer"),"aria-label":"Summer"},[v(n,{name:"season-summer"})],2),d("button",{class:u(["btn tertiary",{active:"Fall"===pa.value.month}]),onClick:r[13]||(r[13]=a=>pa.value.month="Fall"),"aria-label":"Fall"},[v(n,{name:"season-fall"})],2),d("button",{class:u(["btn tertiary",{active:"Winter"===pa.value.month}]),onClick:r[14]||(r[14]=a=>pa.value.month="Winter"),"aria-label":"Winter"},[v(n,{name:"season-winter"})],2)])]),d("div",ia,[r[24]||(r[24]=d("label",{for:"newEventDay",class:"label"},"Day",-1)),s(d("select",{class:"select",id:"newEventDay","onUpdate:modelValue":r[15]||(r[15]=a=>pa.value.day=a)},[(i(),o(p,null,h(28,a=>d("option",{key:a,value:a},w(c(T)(a))+", "+w(Fa(a)),9,da)),64))],512),[[f,pa.value.day]])]),d("div",sa,[r[26]||(r[26]=d("label",{for:"newEventDay",class:"label"},"Time",-1)),s(d("select",{id:"newEventDay","onUpdate:modelValue":r[16]||(r[16]=a=>pa.value.time=a),class:"select"},[r[25]||(r[25]=d("option",{value:"allDay"},"All day",-1)),(i(!0),o(p,null,h(c(x),a=>(i(),o(p,{key:a.time24},["2600"!==a.time24?(i(),o("option",{key:0,value:a.time24},w(a.time12),9,ma)):b("",!0)],64))),128))],512),[[f,pa.value.time]])]),d("div",ca,[r[29]||(r[29]=d("label",{for:"newEventDay",class:"label"},"Repeats",-1)),s(d("select",{class:"select",id:"newEventDay","onUpdate:modelValue":r[17]||(r[17]=a=>pa.value.recurrence=a)},[r[27]||(r[27]=d("option",{value:"none"},"Does not repeat",-1)),r[28]||(r[28]=d("option",{value:"daily"},"Every day",-1)),d("option",ua,"Every "+w(c(W)(Fa(pa.value.day))),1),d("option",va,"Every "+w(c(T)(pa.value.day)),1),d("option",ya,"Every year on "+w(c(T)(pa.value.day))+" of "+w(pa.value.month),1)],512),[[f,pa.value.recurrence]])])])]),footer:g(()=>[d("button",{class:"btn block tertiary",onClick:Ea},"Close"),ha.value?(i(),o("button",{key:0,class:"btn block",onClick:r[18]||(r[18]=a=>(a=>{const r=e.farms[e.farm].calendarEvents.findIndex(e=>e.id===a.id);-1!==r&&(e.farms[e.farm].calendarEvents.splice(r,1),e.saveFarms()),e.closeModal()})(pa.value))},[v(n,{name:"trash"}),r[30]||(r[30]=k(" Delete ",-1))])):b("",!0),ha.value?(i(),o("button",{key:1,class:"btn block secondary",onClick:wa},[v(n,{name:"pencil",size:"1.5"}),r[31]||(r[31]=k(" Save ",-1))])):(i(),o("button",{key:2,class:"btn block secondary",onClick:ka},"Add Event"))]),_:1})])])])])])}}}),[["__scopeId","data-v-01be08d3"]]))}}});
