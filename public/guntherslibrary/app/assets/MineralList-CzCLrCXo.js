import{d as $,u as I,r as M,K as z,o as O,c as d,a,e as n,i as v,f as i,p as y,F as h,g as F,k,h as w,b as l,n as p,L as V,q as D,s as Z,M as P,t as C,j as _}from"./index-crzrhOP4.js";import{u as T,F as S,L as U}from"./useFilter-C3R9tX5A.js";import{L as j}from"./ListCollectionStats-Brj8FXP0.js";import{a as E}from"./objects-VhMafjU8.js";const q={key:0,class:"mainList list"},H=["onClick"],K={class:"header"},R={class:"spriteContainer"},Y=["aria-label"],G={class:"title"},J={key:0,class:"tag tagBlock"},Q={class:"miniLabel"},W={key:1,class:"tag tagBlock"},X={class:"miniLabel"},ee={class:"field"},te={class:"filterBtns2"},le={class:"field"},se={class:"filterBtns2"},oe={class:"field"},re={class:"filterBtns3"},ie=["onClick"],ne={class:"miniLabel"},pe=$({__name:"MineralList",setup(ae){const u=I(),g=M(u.mineral),t=z(u.settings.mineral),x=[{default:!0,value:"collection",label:"Collection order (first to last)",sort:(o,e)=>parseInt(o.id.toString())-parseInt(e.id.toString())},{value:"collectionDesc",label:"Collection order (last to first)",sort:(o,e)=>parseInt(e.id.toString())-parseInt(o.id.toString())},{value:"name",label:"A-Z",sort:(o,e)=>o.name.toLowerCase()<e.name.toLowerCase()?-1:o.name.toLowerCase()>e.name.toLowerCase()?1:0},{value:"nameDesc",label:"Z-A",sort:(o,e)=>o.name.toLowerCase()>e.name.toLowerCase()?-1:o.name.toLowerCase()<e.name.toLowerCase()?1:0},{value:"price",label:"Base Price (low to high)",sort:(o,e)=>o.price-e.price},{value:"priceDesc",label:"Base Price (high to low)",sort:(o,e)=>e.price-o.price},{value:"color",label:"Color (A-Z)",sort:(o,e)=>{const r=o.color?o.color.toLowerCase():"",c=e.color?e.color.toLowerCase():"";return r===""&&c!==""?1:r!==""&&c===""||r<c?-1:r>c?1:0}},{value:"colorDesc",label:"Color (Z-A)",sort:(o,e)=>{const r=o.color?o.color.toLowerCase():"",c=e.color?e.color.toLowerCase():"";return r===""&&c!==""?1:r!==""&&c===""||r>c?-1:r<c?1:0}}],B=[{value:"color",filter:(o,e)=>e.color===o},{value:"donated",default:"all",filter:(o,e)=>E(e,"donated",u.farms[u.farm].collections.mineral,o)}],{filteredAndSorted:m,clearFilters:b,isFiltered:L,isSorted:N}=T({type:"mineral",items:g.value,sortOptions:x,filterOptions:B});return O(()=>{u.header={hideIcon:!1,hideUp:!0,iconName:"minerals",iconSize:"2",label:"Minerals",bookmark:{appType:"page",id:"minerals",name:"Minerals",link:"/collections/mineral",icon:"minerals",scale:3}}}),(o,e)=>{const r=k("icon"),c=k("app-footer-message"),A=k("app-fab");return a(),d("main",null,[n(j,{type:"mineral"}),i(u).isLoading?v("",!0):(a(),d("div",q,[i(m).length>0?(a(),d(h,{key:0},[i(L)?(a(),y(S,{key:0,"list-length":g.value.length,"filtered-list-length":i(m).length,onClearFilters:i(b)},null,8,["list-length","filtered-list-length","onClearFilters"])):v("",!0),(a(!0),d(h,null,F(i(m),s=>(a(),d("button",{key:s.id.toString(),onClick:f=>i(u).navigateTo("/collections/mineral/".concat(s.id)),class:"object"},[l("div",K,[l("div",R,[l("div",{class:"sprite",style:D(i(Z)({texture:s.texture,index:s.sprite,scale:3})),"aria-label":s.displayName?s.displayName:s.name},null,12,Y)]),n(P,{compact:"",type:"mineral",item:s,class:"status"},null,8,["item"])]),e[8]||(e[8]=l("div",{class:"boxLightHr"},null,-1)),l("h2",G,C(s.displayName?s.displayName:s.name),1),t.filters.sort&&["color","colorDesc"].includes(t.filters.sort)?(a(),d("div",J,[s.color?(a(),d("div",{key:0,class:"appIcon",style:D("width: 2.4rem; height: 2.4rem; background-color: ".concat(s.color,";"))},null,4)):v("",!0),l("div",Q,[e[6]||(e[6]=l("small",null,"Dye color",-1)),_(" "+C(s.color?s.color.charAt(0).toUpperCase()+s.color.slice(1):"N/A"),1)])])):v("",!0),t.filters.sort&&["price","priceDesc"].includes(t.filters.sort)?(a(),d("div",W,[n(r,{name:"gold-coin"}),l("div",X,[e[7]||(e[7]=l("small",null,"Sell price",-1)),_(" "+C(s.price?s.price+"g":"N/A"),1)])])):v("",!0)],8,H))),128)),i(L)?(a(),y(S,{key:1,"list-length":g.value.length,"filtered-list-length":i(m).length,onClearFilters:i(b)},null,8,["list-length","filtered-list-length","onClearFilters"])):v("",!0)],64)):(a(),y(S,{key:1,empty:"","list-length":g.value.length,"filtered-list-length":i(m).length,onClearFilters:i(b)},null,8,["list-length","filtered-list-length","onClearFilters"]))])),n(c,{type:"mineral"}),n(A,null,{default:w(()=>[n(U,{"filtered-items":i(m),"is-filtered":i(L),"is-sorted":i(N),"list-length":g.value.length,"filtered-list-length":i(m).length,onClearFilters:i(b)},{default:w(()=>[e[17]||(e[17]=l("h3",null,"Sorting",-1)),l("div",ee,[l("div",te,[l("button",{onClick:e[0]||(e[0]=s=>t.filters.sort==="collection"?t.filters.sort="collectionDesc":t.filters.sort="collection"),class:p([{active:t.filters.sort&&["collection","collectionDesc"].includes(t.filters.sort)},"btn tertiary left"])},[n(r,{name:t.filters.sort==="collection"?"sort-asc":t.filters.sort==="collectionDesc"?"sort-desc":"sort"},null,8,["name"]),e[9]||(e[9]=l("div",{class:"miniLabel"},"Collection",-1))],2),l("button",{onClick:e[1]||(e[1]=s=>t.filters.sort==="name"?t.filters.sort="nameDesc":t.filters.sort="name"),class:p([{active:t.filters.sort&&["name","nameDesc"].includes(t.filters.sort)},"btn tertiary left"])},[n(r,{name:t.filters.sort==="name"?"sort-asc":t.filters.sort==="nameDesc"?"sort-desc":"sort"},null,8,["name"]),e[10]||(e[10]=l("div",{class:"miniLabel"},"Name",-1))],2),l("button",{onClick:e[2]||(e[2]=s=>t.filters.sort==="price"?t.filters.sort="priceDesc":t.filters.sort="price"),class:p([{active:t.filters.sort&&["price","priceDesc"].includes(t.filters.sort)},"btn tertiary left"])},[n(r,{name:t.filters.sort==="price"?"sort-asc":t.filters.sort==="priceDesc"?"sort-desc":"sort"},null,8,["name"]),e[11]||(e[11]=l("div",{class:"miniLabel"},"Price",-1))],2),l("button",{onClick:e[3]||(e[3]=s=>t.filters.sort==="color"?t.filters.sort="colorDesc":t.filters.sort="color"),class:p([{active:t.filters.sort&&["color","colorDesc"].includes(t.filters.sort)},"btn tertiary left"])},[n(r,{name:t.filters.sort==="color"?"sort-asc":t.filters.sort==="colorDesc"?"sort-desc":"sort"},null,8,["name"]),e[12]||(e[12]=l("div",{class:"miniLabel"},"Dye Color",-1))],2)])]),e[18]||(e[18]=l("hr",null,null,-1)),e[19]||(e[19]=l("h3",null,"Filtering",-1)),l("div",le,[e[15]||(e[15]=l("div",{class:"label"},"Donated minerals",-1)),l("div",se,[l("button",{onClick:e[4]||(e[4]=s=>t.filters.donated==="yes"?t.filters.donated="all":t.filters.donated="yes"),class:p([{active:t.filters.donated==="yes"},"btn tertiary left"])},[n(r,{name:t.filters.donated==="yes"?"checkbox-active":"checkbox"},null,8,["name"]),n(r,{name:"donated"}),e[13]||(e[13]=l("div",{class:"miniLabel"},"Donated",-1))],2),l("button",{onClick:e[5]||(e[5]=s=>t.filters.donated==="no"?t.filters.donated="all":t.filters.donated="no"),class:p([{active:t.filters.donated==="no"},"btn tertiary left"])},[n(r,{name:t.filters.donated==="no"?"checkbox-active":"checkbox"},null,8,["name"]),n(r,{name:"x",size:"1"}),e[14]||(e[14]=l("div",{class:"miniLabel"},"Not donated",-1))],2)])]),l("div",oe,[e[16]||(e[16]=l("div",{class:"label"},"Dye color",-1)),l("div",re,[(a(!0),d(h,null,F(i(V),(s,f)=>(a(),d("button",{key:f,onClick:ce=>t.filters.color===f.toString()?t.filters.color="":t.filters.color=f.toString(),class:p([{active:t.filters.color===f.toString()},"btn tertiary left"])},[n(r,{name:t.filters.color===f.toString()?"checkbox-active":"checkbox"},null,8,["name"]),l("div",ne,[l("small",null,C(f.toString().charAt(0).toUpperCase()+f.toString().slice(1)),1),l("div",{class:"filterColorLabel",style:D("background-color: ".concat(f,";"))},null,4)])],10,ie))),128))])])]),_:1},8,["filtered-items","is-filtered","is-sorted","list-length","filtered-list-length","onClearFilters"])]),_:1})])}}});export{pe as default};
