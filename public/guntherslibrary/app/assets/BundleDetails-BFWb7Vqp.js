import{d as H,u as W,r as K,y as S,B as ee,o as X,k as R,c as u,i as p,a as t,n as $,b as e,e as _,p as k,q,f as m,s as B,t as h,A as J,h as w,F as x,g as L,j as c,_ as Y,N as le}from"./index-crzrhOP4.js";const te={class:"boxHeader roomHeader"},ne={class:"roomName",style:{"margin-right":"auto"}},ae={class:"tagGroup tagGroupSpanFlex"},se=["onClick","disabled"],ie={class:"miniLabel"},oe={class:"tagGroup tagGroupSpanFlex"},de=["onClick"],ue={class:"miniLabel"},re={class:"boxContent"},me={class:"tagGroup"},ce=["onClick"],pe={class:"tagGroup bundleItemToSelectContent"},ve={key:0,class:"miniLabel",style:{"margin-right":"auto"}},be={class:"miniLabel",style:{"margin-right":"auto"}},ye={class:"miniLabel"},ke=["onClick"],ge={key:0,class:"tag tagBlock",style:{border:"red 2px dashed"}},fe={class:"miniLabel"},Ie={class:"bundleSlotsGrid"},xe={class:"boxContent"},_e={key:0,class:"tag tagBlock rewardBox"},De={class:"tagGroup",style:{"align-items":"center",gap:"0.4rem"}},Ce={class:"miniLabel"},he=H({__name:"Bundle",props:{room:{type:String,required:!0},bundleIndex:{type:Number,required:!0}},setup(M){const i=W(),d=M,g=K([]),f=v=>{var n,o;i.farms[i.farm].collections.bundles[d.room][d.bundleIndex].bundleIndex=v,i.farms[i.farm].collections.bundles[d.room][d.bundleIndex].completed=[],i.farms[i.farm].collections.bundles[d.room][d.bundleIndex].required=[];for(let I=0;I<((o=(n=s.value)==null?void 0:n.pick)!=null?o:0);I++)s.value&&i.farms[i.farm].collections.bundles[d.room][d.bundleIndex].required.push(s.value.required[I].itemData.qualifiedId);i.saveFarms(),i.closeModal()},r=S(()=>i.farms[i.farm].collections.bundles[d.room][d.bundleIndex]),a=S(()=>d.room.replace(" ","")+"-"+d.bundleIndex),C=S(()=>r.value.bundleIndex),s=S(()=>{var v,n;return(n=(v=i.bundles[d.room])==null?void 0:v[d.bundleIndex])==null?void 0:n[C.value]}),y=v=>{const[n]=v.split("-slot-");return i.bundles[d.room][d.bundleIndex][C.value].required.find(o=>o.itemData.qualifiedId===n)||null},G=v=>{var o,I;const n=g.value.findIndex(l=>l===v.itemData.qualifiedId);n===-1?g.value.length<((I=(o=s.value)==null?void 0:o.pick)!=null?I:0)&&g.value.push(v.itemData.qualifiedId):g.value.splice(n,1),r.value.required=[...g.value],i.saveFarms()},z=(v,n)=>{var l,b;const o="".concat(v,"-slot-").concat(n),I=r.value.completed.findIndex(D=>D===o);if(I===-1){if(r.value.completed.length>=((b=(l=s.value)==null?void 0:l.complete)!=null?b:r.value.required.length)){r.value.completed.splice(-1,1),r.value.completed.push(o);return}r.value.completed.push(o)}else r.value.completed.splice(I,1);i.saveFarms()},F=v=>{if(!v)return;const n=i.searchIndex.find(o=>o.qualifiedId===v.itemData.qualifiedId);n&&i.navigateWithAppType(n)};return ee(()=>i.openModalId,v=>{v==="selectBundleRequiredItems-"+a.value&&(g.value=[...r.value.required])}),X(()=>{g.value=[...r.value.required]}),(v,n)=>{var I;const o=R("icon");return s.value?(t(),u("div",{key:0,class:$(["box",r.value.completed.length===s.value.complete?"goldRounded":"redMetal"])},[e("div",te,[_(o,{name:"num-".concat(d.bundleIndex+1,"-sm"),size:"2",style:{"margin-right":"-0.8rem"}},null,8,["name"]),e("div",{class:"appIcon",style:q(m(B)({texture:"bundles",index:s.value.bundleImageIndex,scale:1})+" margin-left: .4rem; flex: 0 0 auto;")},null,4),e("div",ne,h(s.value.bundleName)+" Bundle"+h(s.value.bundleType==="default"?"":" (remixed)"),1),s.value.pick!==s.value.required.length?(t(),k(J,{key:0,"modal-id":"selectBundleRequiredItems-"+a.value,title:"Pick ".concat(s.value.pick," required items"),height:"auto"},{button:w(()=>[e("button",{class:"btn tertiary",onClick:n[0]||(n[0]=l=>m(i).openModal("selectBundleRequiredItems-"+a.value))},[_(o,{name:"pencil",size:"1.5"})])]),body:w(()=>[e("div",ae,[(t(!0),u(x,null,L(s.value.required,(l,b)=>{var D;return t(),u("button",{class:$(["btn primary block left",{active:g.value.includes(l.itemData.qualifiedId)}]),key:b,onClick:T=>G(l),disabled:g.value.length>=((D=s.value.pick)!=null?D:0)&&!g.value.includes(l.itemData.qualifiedId)},[e("div",{class:"appIcon",style:q(m(B)({texture:l.itemData.texture||void 0,index:l.itemData.sprite||0,scale:2}))},null,4),e("div",ie,h(l.itemData.displayName||l.itemData.name),1),g.value.includes(l.itemData.qualifiedId)?(t(),k(o,{key:0,name:"check",size:"2",style:{"margin-left":"auto"}})):p("",!0)],10,se)}),128))])]),footer:w(()=>[e("button",{class:"btn tertiary block",onClick:n[1]||(n[1]=l=>m(i).closeModal())},"Close")]),_:1},8,["modal-id","title"])):p("",!0),Object.keys(m(i).bundles[d.room][d.bundleIndex]).length>1?(t(),k(J,{key:1,"modal-id":"selectBundleGroup-"+a.value,title:"Select a bundle for bundle #".concat(d.bundleIndex+1),height:"auto",style:{"margin-right":"0.6rem"}},{button:w(()=>[e("button",{class:"btn tertiary",onClick:n[2]||(n[2]=l=>m(i).openModal("selectBundleGroup-"+a.value))},[_(o,{name:"bundle",size:"1.5"})])]),body:w(()=>[e("div",oe,[(t(!0),u(x,null,L(Object.values(m(i).bundles[d.room][d.bundleIndex]),(l,b)=>(t(),u("button",{class:$(["btn primary block left",{active:b===C.value}]),key:b,onClick:D=>f(b)},[l.bundleImageIndex?(t(),u("div",{key:0,class:"appIcon",style:q(m(B)({texture:"bundles",index:l.bundleImageIndex,scale:1}))},null,4)):p("",!0),e("div",ue,h(l.bundleName)+" Bundle"+h(l.bundleType==="default"?"":" (remixed)"),1),b===C.value?(t(),k(o,{key:1,name:"check",size:"2",style:{"margin-left":"auto"}})):p("",!0)],10,de))),128))])]),footer:w(()=>[e("button",{class:"btn tertiary block",onClick:n[3]||(n[3]=l=>m(i).closeModal())},"Cancel")]),_:1},8,["modal-id","title"])):p("",!0)]),e("div",re,[e("div",me,[(t(!0),u(x,null,L(r.value.required,(l,b)=>{var D,T,N,U,A,Q,V,j,O,P,E;return t(),u("div",{key:b,class:"bundleItemToSelectWrapper"},[e("button",{class:$(["btn block tertiary bundleItemToSelect",{active:r.value.completed.includes("".concat(l,"-slot-").concat(b))}]),onClick:Z=>z(l,b)},[d.room==="Vault"?(t(),k(o,{key:0,name:"gold-coin"})):(t(),u("div",{key:1,class:"appIcon",style:q(m(B)({texture:(D=y(l))==null?void 0:D.itemData.texture,index:(T=y(l))==null?void 0:T.itemData.sprite,scale:2}))},null,4)),e("div",pe,[d.room==="Vault"?(t(),u("div",ve,h(s.value.bundleName),1)):(t(),u(x,{key:1},[e("div",be,h(((N=y(l))==null?void 0:N.itemData.displayName)||((U=y(l))==null?void 0:U.itemData.name)),1),(A=y(l))!=null&&A.minQuality&&((Q=y(l))==null?void 0:Q.minQuality)==="1"?(t(),k(o,{key:0,name:"quality-silver",size:"2"})):p("",!0),(V=y(l))!=null&&V.minQuality&&((j=y(l))==null?void 0:j.minQuality)==="2"?(t(),k(o,{key:1,name:"quality-gold",size:"2"})):p("",!0),(O=y(l))!=null&&O.minQuality&&((P=y(l))==null?void 0:P.minQuality)==="3"?(t(),k(o,{key:2,name:"quality-iridium",size:"2"})):p("",!0),e("div",ye,[n[5]||(n[5]=e("small",null,"Qty",-1)),c(" x"+h((E=y(l))==null?void 0:E.quantity),1)])],64)),r.value.completed.includes("".concat(l,"-slot-").concat(b))?(t(),k(o,{key:2,name:"check",size:"2"})):p("",!0)])],10,ce),e("button",{class:"btn tertiary",onClick:Z=>F(y(l)),style:{flex:"0 0 auto",padding:"0.2rem 0.4rem 0rem 0.3rem"}},[_(o,{name:"arrow-forward",size:"2"})],8,ke)])}),128)),r.value.required.length<((I=s.value.pick)!=null?I:0)?(t(),u("div",ge,[_(o,{name:"question",size:"2"}),e("div",fe,[e("div",null,[n[6]||(n[6]=c("Missing required items!",-1)),n[7]||(n[7]=e("br",null,null,-1)),n[8]||(n[8]=c("Use the ",-1)),_(o,{name:"pencil",size:"1"}),n[9]||(n[9]=c(" to select more.",-1))])])])):p("",!0)]),e("div",Ie,[(t(!0),u(x,null,L(s.value.complete,l=>{var b,D;return t(),u("div",{class:$(["box bundleSlot",{bundleSlotActive:r.value.completed[l-1]}]),key:l},[d.room==="Vault"&&r.value.completed[l-1]?(t(),k(o,{key:0,name:"gold-coin-stack"})):r.value.completed[l-1]?(t(),u("div",{key:1,class:"appIcon",style:q(m(B)({texture:(b=y(r.value.completed[l-1]))==null?void 0:b.itemData.texture,index:(D=y(r.value.completed[l-1]))==null?void 0:D.itemData.sprite,scale:2}))},null,4)):p("",!0)],2)}),128))])]),e("div",xe,[M.room==="Abandoned Joja Mart"?(t(),u("div",_e,[n[10]||(n[10]=e("div",{class:"tagGroup",style:{"align-items":"center",gap:"0.4rem"}},[e("div",{class:"miniLabel"},[e("small",null,"Bundle Reward"),c(" Movie Theater ")])],-1)),r.value.completed.length===s.value.complete?(t(),k(o,{key:0,name:"bundle-".concat(s.value.colorIndex,"-complete"),size:"2"},null,8,["name"])):p("",!0)])):(t(),u("button",{key:1,class:"tag tagBlock btn rewardBox",onClick:n[4]||(n[4]=l=>F(s.value.reward))},[e("div",De,[e("div",{class:"appIcon",style:q(m(B)({texture:s.value.reward.type==="BO"?"TileSheets\\Craftables":s.value.reward.itemData.texture,index:s.value.reward.itemData.sprite,scale:s.value.reward.type==="BO"?1:2}))},null,4),e("div",Ce,[n[11]||(n[11]=e("small",null,"Bundle Reward",-1)),c(" "+h(s.value.reward.quantity?s.value.reward.quantity+"x ":"")+h(s.value.reward.itemData.displayName||s.value.reward.itemData.name),1)])]),r.value.completed.length===s.value.complete?(t(),k(o,{key:0,name:"bundle-".concat(s.value.colorIndex,"-complete"),size:"2"},null,8,["name"])):(t(),k(o,{key:1,name:"bundle-".concat(s.value.colorIndex),size:"2"},null,8,["name"]))]))])],2)):p("",!0)}}}),qe=Y(he,[["__scopeId","data-v-3dac132b"]]),Be={key:0,class:"mainList"},we={class:"detailIntro"},$e={class:"detailIntroContainer"},Re={class:"detailIntroSprite"},Le={class:"detailIntroContent detailIntroContentCenter"},ze={class:"note parchment",style:{display:"flex","align-items":"center",gap:"0.4rem"}},Se={style:{"text-wrap":"pretty"}},Me=H({__name:"BundleDetails",setup(M){const i=W(),d=le(),g=K(),f=d.params.id;return X(()=>{g.value=i.getItemById(d.params.id,"bundle"),i.header={hideIcon:!0,hideUp:!1,upPath:"/collections/bundle",label:d.params.id,bookmark:{appType:"bundle",link:"/collections/bundle/".concat(f),id:f.replaceAll(" ",""),name:f,scale:2}},i.logs&&console.info("[🪵] ➡️ CURRENT BUNDLE ROOM:",g.value)}),(r,a)=>{const C=R("icon"),s=R("wiki-link"),y=R("app-footer-message"),G=R("app-fab");return t(),u("main",null,[g.value?(t(),u("div",Be,[e("div",we,[e("div",$e,[e("div",Re,[m(i).checkForRoomBundleCompletion(m(f))?(t(),k(C,{key:0,name:"star-cc-filled",size:"4"})):(t(),k(C,{key:1,name:"star-cc-empty",size:"4"}))]),e("div",Le,[m(f)==="Crafts Room"?(t(),u(x,{key:0},[a[0]||(a[0]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Reward"),c(" Bridge Repair ")],-1)),a[1]||(a[1]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Unlocks"),c(" Quarry ")],-1))],64)):p("",!0),m(f)==="Pantry"?(t(),u(x,{key:1},[a[2]||(a[2]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Reward"),c(" Greenhouse Repaired ")],-1)),a[3]||(a[3]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Unlocks"),c(" All-year farming ")],-1))],64)):p("",!0),m(f)==="Fish Tank"?(t(),u(x,{key:2},[a[4]||(a[4]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Reward"),c(" Glittering Boulder Removed ")],-1)),a[5]||(a[5]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Unlocks"),c(" Panning with Copper Pan ")],-1))],64)):p("",!0),m(f)==="Boiler Room"?(t(),u(x,{key:3},[a[6]||(a[6]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Reward"),c(" Minecarts Repaired ")],-1)),a[7]||(a[7]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Unlocks"),c(" Fast travel ")],-1))],64)):p("",!0),m(f)==="Vault"?(t(),u(x,{key:4},[a[8]||(a[8]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Reward"),c(" Bus Repaired ")],-1)),a[9]||(a[9]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Unlocks"),c(" Access to Calico Desert ")],-1))],64)):p("",!0),m(f)==="Abandoned Joja Mart"?(t(),u(x,{key:5},[a[10]||(a[10]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Reward"),c(" JojaMart converted to Movie Theater ")],-1)),a[11]||(a[11]=e("div",{class:"detailIntroDescription miniLabel"},[e("small",null,"Unlocks"),c(" Fun time with friends! ")],-1))],64)):p("",!0)])])]),(t(!0),u(x,null,L(Object.keys(m(i).bundles[m(f)]).length,z=>(t(),k(qe,{key:z,room:m(f),bundleIndex:z-1},null,8,["room","bundleIndex"]))),128)),e("div",ze,[_(C,{name:"exclamation-green",size:"3.35",style:{flex:"0 0 auto"}}),e("div",Se,[a[12]||(a[12]=c(" Change type of bundle between standard and remixed by selecting the ",-1)),_(C,{name:"bundle",size:"1",style:{"vertical-align":"middle"},"aria-label":"bundle icon"}),a[13]||(a[13]=c(" button. Some bundles can require different items which you can select with the ",-1)),_(C,{name:"pencil",size:"1",style:{"vertical-align":"middle"},"aria-label":"pencil icon"}),a[14]||(a[14]=c(" button. Click an item in the bundle to mark it as complete. ",-1))])]),_(s,{name:"bundles"})])):p("",!0),_(y,{type:"bundle"}),_(G)])}}}),Te=Y(Me,[["__scopeId","data-v-0e029fb4"]]);export{Te as default};
