import{d as F,u as k,p as S,a as f,h as L,b as o,t as m,R as M,e as B,c as h,i as I,k as C,f as V,A as w,_ as $,j as b,K as R,y as _}from"./index-crzrhOP4.js";const x={key:0,style:{"padding-inline":"0.4rem"}},A={class:"filterMenu"},z=F({__name:"ListFilter",props:{isFiltered:{type:Boolean},isSorted:{type:Boolean},listLength:{},filteredListLength:{},height:{}},emits:["clear-filters"],setup(c,{emit:u}){const r=k(),s=c,g=u,e=()=>{window.scrollTo(0,0),r.closeModal()};return(l,a)=>{const v=C("icon");return f(),S(w,{"modal-id":"listFilterMenu",title:"Sorting and Filtering",height:s.height?s.height:"auto"},{button:L(()=>[o("button",{class:"fab btn boxRounded filterBtn",onClick:a[0]||(a[0]=p=>V(r).openModal("listFilterMenu"))},[B(v,{name:l.isFiltered?"filter-active":l.isSorted?"filter-sorted":"filter",size:"1.5"},null,8,["name"]),s.filteredListLength!=null&&s.listLength!=null&&l.isFiltered?(f(),h("strong",x,m(s.filteredListLength)+"/"+m(s.listLength),1)):I("",!0)])]),body:L(()=>[o("div",A,[M(l.$slots,"default",{},void 0,!0)])]),footer:L(()=>[o("button",{class:"btn secondary",onClick:a[1]||(a[1]=p=>g("clear-filters"))},"Reset"),o("button",{class:"btn block",onClick:e}," View "+m(s.isFiltered?"".concat(s.filteredListLength,"/").concat(s.listLength," items"):"all items"),1)]),_:3},8,["height"])}}}),G=$(z,[["__scopeId","data-v-015b1e9d"]]),E={class:"note parchment filterNotice"},T={key:0},j={key:1},D=F({__name:"FilterNotice",props:{listLength:{},filteredListLength:{},empty:{type:Boolean}},emits:["clear-filters"],setup(c,{emit:u}){const r=c,s=u;return(g,e)=>{const l=C("icon");return f(),h("div",E,[o("div",null,[r.empty?(f(),h("div",T,[...e[1]||(e[1]=[o("strong",null,"No items matching your filters.",-1),o("br",null,null,-1)])])):(f(),h("div",j,[o("strong",null,m(r.filteredListLength)+"/"+m(r.listLength),1),e[2]||(e[2]=b(" items matching filter. ",-1))]))]),o("button",{class:"btn tertiary",onClick:e[0]||(e[0]=a=>s("clear-filters"))},[B(l,{name:"filter-cancel",size:1.3}),e[3]||(e[3]=b(" Reset filter ",-1))])])}}}),H=$(D,[["__scopeId","data-v-99a2ec12"]]);function J({type:c,items:u,sortOptions:r,filterOptions:s}){const g=k(),e=R(g.settings[c]),l=t=>{if(!t||!e.filters.sort)return;const d=e.filters.sort;return t.sort((n,i)=>{const y=r.find(N=>N.value===d);return y?y.sort(n,i):0}),t},a=_(()=>{if(!u)return[];const t=u.filter(n=>s.every(i=>e.filters[i.value]!==""?i.filter(e.filters[i.value],n):!0));return l(t||[])||[]}),v=_(()=>s.some(t=>t.default?e.filters[t.value]!==t.default:e.filters[t.value]!=="")),p=_(()=>{var t;return e.filters.sort!==((t=r.find(d=>d.default))==null?void 0:t.value)});return{filteredAndSorted:a,isFiltered:v,isSorted:p,clearFilters:()=>{var t,d;s.forEach(n=>{var i;n.value!=="sort"&&(e.filters[n.value]=(i=n.default)!=null?i:"")}),e.filters.sort&&(e.filters.sort=(d=(t=r.find(n=>n.default))==null?void 0:t.value)!=null?d:"")}}}export{H as F,G as L,J as u};
